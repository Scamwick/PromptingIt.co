<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="API Console - Manage API keys and monitor usage">
    <title>API Console - Prompting It</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%2322d3ee' rx='20' width='100' height='100'/><text x='50' y='68' font-size='50' text-anchor='middle' fill='%23030306' font-family='monospace' font-weight='bold'>#P</text></svg>">
    <!-- Authentication & Security Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="auth.js"></script>
    <script src="security.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --glacier: #67e8f9;
            --glacier-deep: #22d3ee;
            --emerald: #34d399;
            --emerald-dark: #10b981;
            --solar: #facc15;
            --violet: #a78bfa;
            --violet-dark: #8b5cf6;
            --rose: #fb7185;
            --surface-0: #050508;
            --surface-1: #09090b;
            --surface-2: #18181b;
            --surface-3: #27272a;
            --surface-4: #3f3f46;
            --text-1: #ffffff;
            --text-2: rgba(255, 255, 255, 0.7);
            --text-3: rgba(255, 255, 255, 0.4);
            --text-4: rgba(255, 255, 255, 0.2);
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --font-mono: 'JetBrains Mono', monospace;
            --font-sans: 'Inter', sans-serif;
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
            --glow-glacier: 0 0 40px rgba(103,232,249,0.2);
            --duration-fast: 150ms;
            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
        }

        body {
            font-family: var(--font-sans);
            background: var(--surface-0);
            color: var(--text-1);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        .app { display: flex; min-height: 100vh; }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: var(--surface-1);
            border-right: 1px solid var(--surface-3);
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 100;
        }

        .logo {
            font-family: var(--font-mono);
            font-size: 18px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--glacier), var(--glacier-deep));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding: 0 12px;
            margin-bottom: 32px;
            text-decoration: none;
            display: block;
        }

        .nav-section { margin-bottom: 24px; }
        .nav-label {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-3);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 0 12px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: var(--radius-md);
            color: var(--text-2);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all var(--duration-fast);
        }

        .nav-item:hover { background: var(--surface-2); color: var(--text-1); }
        .nav-item.active {
            background: linear-gradient(135deg, rgba(103,232,249,0.15), rgba(34,211,238,0.1));
            color: var(--glacier);
        }

        .nav-icon { width: 20px; text-align: center; }

        .sidebar-footer {
            margin-top: auto;
            padding-top: 24px;
            border-top: 1px solid var(--surface-3);
        }

        .user-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: var(--radius-md);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--glacier), var(--emerald));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            color: var(--surface-1);
        }

        .user-name { font-size: 14px; font-weight: 600; }
        .user-tier { font-size: 12px; color: var(--emerald); }

        /* Main Content */
        .main {
            flex: 1;
            margin-left: 260px;
            padding: 32px;
            max-width: 1200px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-content h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-content p { color: var(--text-2); font-size: 15px; }

        .btn {
            padding: 12px 20px;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--duration-fast);
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--glacier), var(--glacier-deep));
            color: var(--surface-1);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-glacier);
        }

        .btn-secondary {
            background: var(--surface-2);
            color: var(--text-1);
            border: 1px solid var(--surface-3);
        }

        /* Usage Stats */
        .usage-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }

        .usage-stat {
            background: var(--surface-1);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-lg);
            padding: 24px;
        }

        .usage-stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .usage-stat-label { font-size: 13px; color: var(--text-3); }

        .usage-stat-trend {
            font-size: 11px;
            padding: 4px 8px;
            border-radius: var(--radius-sm);
            font-weight: 600;
        }

        .usage-stat-trend.up { background: rgba(52,211,153,0.15); color: var(--emerald); }
        .usage-stat-trend.down { background: rgba(251,113,133,0.15); color: var(--rose); }

        .usage-stat-value {
            font-family: var(--font-mono);
            font-size: 28px;
            font-weight: 700;
        }

        .usage-stat-value.gradient {
            background: linear-gradient(135deg, var(--glacier), var(--emerald));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Section Card */
        .section-card {
            background: var(--surface-1);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-lg);
            margin-bottom: 24px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--surface-3);
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i { color: var(--glacier); }

        /* API Keys */
        .api-keys-list { padding: 0; }

        .api-key-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px 24px;
            border-bottom: 1px solid var(--surface-3);
        }

        .api-key-item:last-child { border-bottom: none; }

        .api-key-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            background: rgba(103,232,249,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--glacier);
        }

        .api-key-info { flex: 1; }

        .api-key-name {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .api-key-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: var(--radius-sm);
            font-weight: 600;
        }

        .api-key-badge.active { background: rgba(52,211,153,0.15); color: var(--emerald); }
        .api-key-badge.limited { background: rgba(250,204,21,0.15); color: var(--solar); }
        .api-key-badge.expired { background: rgba(251,113,133,0.15); color: var(--rose); }

        .api-key-value {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--text-3);
            background: var(--surface-2);
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .api-key-value button {
            background: none;
            border: none;
            color: var(--text-3);
            cursor: pointer;
            padding: 4px;
            transition: color var(--duration-fast);
        }

        .api-key-value button:hover { color: var(--glacier); }

        .api-key-meta {
            display: flex;
            gap: 20px;
            margin-top: 8px;
            font-size: 12px;
            color: var(--text-3);
        }

        .api-key-meta span { display: flex; align-items: center; gap: 6px; }

        .api-key-actions { display: flex; gap: 8px; }

        .api-key-action {
            width: 36px;
            height: 36px;
            background: var(--surface-2);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-sm);
            color: var(--text-3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--duration-fast);
        }

        .api-key-action:hover {
            background: var(--glacier);
            color: var(--surface-1);
            border-color: var(--glacier);
        }

        .api-key-action.danger:hover {
            background: var(--rose);
            border-color: var(--rose);
        }

        /* Code Example */
        .code-example {
            padding: 24px;
        }

        .code-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 16px;
        }

        .code-tab {
            padding: 10px 16px;
            background: var(--surface-2);
            border: none;
            color: var(--text-3);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all var(--duration-fast);
        }

        .code-tab:hover { color: var(--text-1); }
        .code-tab.active { background: var(--surface-3); color: var(--text-1); }

        .code-block {
            background: var(--surface-2);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-md);
            padding: 20px;
            position: relative;
            overflow-x: auto;
        }

        .code-block pre {
            font-family: var(--font-mono);
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-2);
        }

        .code-block .keyword { color: var(--violet); }
        .code-block .string { color: var(--emerald); }
        .code-block .function { color: var(--glacier); }
        .code-block .comment { color: var(--text-3); }
        .code-block .number { color: var(--solar); }

        .code-copy {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--surface-3);
            border: none;
            color: var(--text-3);
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all var(--duration-fast);
        }

        .code-copy:hover { background: var(--glacier); color: var(--surface-1); }

        /* Usage Chart */
        .usage-chart {
            padding: 24px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .chart-period {
            display: flex;
            gap: 4px;
            background: var(--surface-2);
            padding: 4px;
            border-radius: var(--radius-sm);
        }

        .chart-period-btn {
            padding: 6px 12px;
            background: transparent;
            border: none;
            color: var(--text-3);
            font-size: 12px;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all var(--duration-fast);
        }

        .chart-period-btn.active { background: var(--surface-3); color: var(--text-1); }

        .chart-bars {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            height: 200px;
            padding: 20px 0;
        }

        .chart-bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .chart-bar {
            width: 100%;
            max-width: 40px;
            background: linear-gradient(180deg, var(--glacier), var(--glacier-deep));
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
            transition: all var(--duration-fast);
            position: relative;
        }

        .chart-bar:hover { opacity: 0.8; }

        .chart-bar::after {
            content: attr(data-value);
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            font-family: var(--font-mono);
            color: var(--text-2);
            opacity: 0;
            transition: opacity var(--duration-fast);
        }

        .chart-bar:hover::after { opacity: 1; }

        .chart-label {
            font-size: 11px;
            color: var(--text-3);
        }

        /* Rate Limits */
        .rate-limits { padding: 24px; }

        .rate-limit-item {
            margin-bottom: 20px;
        }

        .rate-limit-item:last-child { margin-bottom: 0; }

        .rate-limit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .rate-limit-name { font-size: 14px; font-weight: 500; }

        .rate-limit-value {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--text-2);
        }

        .rate-limit-bar {
            height: 8px;
            background: var(--surface-3);
            border-radius: var(--radius-sm);
            overflow: hidden;
        }

        .rate-limit-fill {
            height: 100%;
            border-radius: var(--radius-sm);
            transition: width 0.5s ease;
        }

        .rate-limit-fill.low { background: var(--emerald); }
        .rate-limit-fill.medium { background: var(--solar); }
        .rate-limit-fill.high { background: var(--rose); }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.open { transform: translateX(0); }
            .main { margin-left: 0; }
            .usage-stats { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 768px) {
            .main { padding: 20px; }
            .usage-stats { grid-template-columns: 1fr; }
            .api-key-item { flex-direction: column; align-items: flex-start; }
            .api-key-actions { margin-top: 16px; }
        }

        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 16px;
            left: 16px;
            z-index: 200;
            width: 44px;
            height: 44px;
            background: var(--surface-2);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-md);
            color: var(--text-1);
            cursor: pointer;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 1024px) {
            .mobile-menu-btn { display: flex; }
        }
    </style>
</head>
<body>
    <div class="app">
        <button class="mobile-menu-btn" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <a href="index.html" class="logo">#PromptingIt</a>

            <nav class="nav-section">
                <div class="nav-label">Main</div>
                <a href="creator-dashboard.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-chart-line"></i></span>
                    Dashboard
                </a>
                <a href="library.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-folder-open"></i></span>
                    Prompt Library
                </a>
                <a href="playground.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-play-circle"></i></span>
                    Playground
                </a>
                <a href="templates.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-shapes"></i></span>
                    Templates
                </a>
                <a href="workflows.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-project-diagram"></i></span>
                    Workflows
                </a>
            </nav>

            <nav class="nav-section">
                <div class="nav-label">Team</div>
                <a href="workspace.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-users"></i></span>
                    Workspace
                </a>
                <a href="analytics.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-chart-bar"></i></span>
                    Analytics
                </a>
                <a href="api-console.html" class="nav-item active">
                    <span class="nav-icon"><i class="fas fa-code"></i></span>
                    API Console
                </a>
            </nav>

            <nav class="nav-section">
                <div class="nav-label">Account</div>
                <a href="settings.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-cog"></i></span>
                    Settings
                </a>
                <a href="admin.html" class="nav-item">
                    <span class="nav-icon"><i class="fas fa-shield-alt"></i></span>
                    Admin
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-card">
                    <div class="user-avatar">JD</div>
                    <div class="user-info">
                        <div class="user-name">Jane Doe</div>
                        <div class="user-tier"><i class="fas fa-crown"></i> Pro Plan</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <div class="header">
                <div class="header-content">
                    <h1>API Console</h1>
                    <p>Manage API keys and monitor your API usage</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="openCreateKeyModal()">
                        <i class="fas fa-plus"></i>
                        Create API Key
                    </button>
                </div>
            </div>

            <!-- Usage Stats -->
            <div class="usage-stats">
                <div class="usage-stat">
                    <div class="usage-stat-header">
                        <div class="usage-stat-label">API Calls Today</div>
                        <span class="usage-stat-trend up">+12%</span>
                    </div>
                    <div class="usage-stat-value gradient">24,847</div>
                </div>
                <div class="usage-stat">
                    <div class="usage-stat-header">
                        <div class="usage-stat-label">This Month</div>
                        <span class="usage-stat-trend up">+8%</span>
                    </div>
                    <div class="usage-stat-value">487,293</div>
                </div>
                <div class="usage-stat">
                    <div class="usage-stat-header">
                        <div class="usage-stat-label">Avg Response Time</div>
                        <span class="usage-stat-trend down">-5%</span>
                    </div>
                    <div class="usage-stat-value">142ms</div>
                </div>
                <div class="usage-stat">
                    <div class="usage-stat-header">
                        <div class="usage-stat-label">Success Rate</div>
                    </div>
                    <div class="usage-stat-value" style="color: var(--emerald);">99.8%</div>
                </div>
            </div>

            <!-- API Keys -->
            <div class="section-card">
                <div class="section-header">
                    <h3 class="section-title"><i class="fas fa-key"></i> API Keys</h3>
                </div>
                <div class="api-keys-list">
                    <div class="api-key-item">
                        <div class="api-key-icon"><i class="fas fa-key"></i></div>
                        <div class="api-key-info">
                            <div class="api-key-name">
                                Production Key
                                <span class="api-key-badge active">Active</span>
                            </div>
                            <div class="api-key-value">
                                <span>pk_live_••••••••••••••••8f4a</span>
                                <button onclick="copyKey(this)" title="Copy"><i class="fas fa-copy"></i></button>
                                <button onclick="toggleKey(this)" title="Show/Hide"><i class="fas fa-eye"></i></button>
                            </div>
                            <div class="api-key-meta">
                                <span><i class="fas fa-calendar"></i> Created Dec 15, 2024</span>
                                <span><i class="fas fa-clock"></i> Last used 2 minutes ago</span>
                                <span><i class="fas fa-chart-line"></i> 18,432 calls today</span>
                            </div>
                        </div>
                        <div class="api-key-actions">
                            <button class="api-key-action" title="Edit"><i class="fas fa-pencil-alt"></i></button>
                            <button class="api-key-action" title="Regenerate"><i class="fas fa-sync-alt"></i></button>
                            <button class="api-key-action danger" title="Delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>

                    <div class="api-key-item">
                        <div class="api-key-icon"><i class="fas fa-key"></i></div>
                        <div class="api-key-info">
                            <div class="api-key-name">
                                Development Key
                                <span class="api-key-badge active">Active</span>
                            </div>
                            <div class="api-key-value">
                                <span>pk_test_••••••••••••••••2b1c</span>
                                <button onclick="copyKey(this)" title="Copy"><i class="fas fa-copy"></i></button>
                                <button onclick="toggleKey(this)" title="Show/Hide"><i class="fas fa-eye"></i></button>
                            </div>
                            <div class="api-key-meta">
                                <span><i class="fas fa-calendar"></i> Created Nov 28, 2024</span>
                                <span><i class="fas fa-clock"></i> Last used 1 hour ago</span>
                                <span><i class="fas fa-chart-line"></i> 6,415 calls today</span>
                            </div>
                        </div>
                        <div class="api-key-actions">
                            <button class="api-key-action" title="Edit"><i class="fas fa-pencil-alt"></i></button>
                            <button class="api-key-action" title="Regenerate"><i class="fas fa-sync-alt"></i></button>
                            <button class="api-key-action danger" title="Delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>

                    <div class="api-key-item">
                        <div class="api-key-icon" style="background: rgba(250,204,21,0.1); color: var(--solar);"><i class="fas fa-key"></i></div>
                        <div class="api-key-info">
                            <div class="api-key-name">
                                CI/CD Pipeline Key
                                <span class="api-key-badge limited">Rate Limited</span>
                            </div>
                            <div class="api-key-value">
                                <span>pk_ci_••••••••••••••••9d3e</span>
                                <button onclick="copyKey(this)" title="Copy"><i class="fas fa-copy"></i></button>
                                <button onclick="toggleKey(this)" title="Show/Hide"><i class="fas fa-eye"></i></button>
                            </div>
                            <div class="api-key-meta">
                                <span><i class="fas fa-calendar"></i> Created Oct 10, 2024</span>
                                <span><i class="fas fa-clock"></i> Last used 3 days ago</span>
                                <span><i class="fas fa-chart-line"></i> 0 calls today</span>
                            </div>
                        </div>
                        <div class="api-key-actions">
                            <button class="api-key-action" title="Edit"><i class="fas fa-pencil-alt"></i></button>
                            <button class="api-key-action" title="Regenerate"><i class="fas fa-sync-alt"></i></button>
                            <button class="api-key-action danger" title="Delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Start -->
            <div class="section-card">
                <div class="section-header">
                    <h3 class="section-title"><i class="fas fa-rocket"></i> Quick Start</h3>
                </div>
                <div class="code-example">
                    <div class="code-tabs">
                        <button class="code-tab active" onclick="showCodeTab('curl')">cURL</button>
                        <button class="code-tab" onclick="showCodeTab('python')">Python</button>
                        <button class="code-tab" onclick="showCodeTab('javascript')">JavaScript</button>
                        <button class="code-tab" onclick="showCodeTab('go')">Go</button>
                    </div>
                    <div class="code-block" id="code-curl">
                        <button class="code-copy" onclick="copyCode()"><i class="fas fa-copy"></i> Copy</button>
                        <pre><span class="comment"># Execute a prompt</span>
<span class="function">curl</span> -X POST https://api.promptingit.co/v1/prompts/execute \
  -H <span class="string">"Authorization: Bearer pk_live_your_api_key"</span> \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "prompt_id": "customer-support-v2",
    "variables": {
      "customer_name": "John",
      "issue": "billing question"
    },
    "model": "gpt-4"
  }'</span></pre>
                    </div>
                    <div class="code-block" id="code-python" style="display: none;">
                        <button class="code-copy" onclick="copyCode()"><i class="fas fa-copy"></i> Copy</button>
                        <pre><span class="keyword">import</span> promptingit

<span class="comment"># Initialize the client</span>
client = promptingit.Client(<span class="string">"pk_live_your_api_key"</span>)

<span class="comment"># Execute a prompt</span>
response = client.prompts.execute(
    prompt_id=<span class="string">"customer-support-v2"</span>,
    variables={
        <span class="string">"customer_name"</span>: <span class="string">"John"</span>,
        <span class="string">"issue"</span>: <span class="string">"billing question"</span>
    },
    model=<span class="string">"gpt-4"</span>
)

<span class="keyword">print</span>(response.output)</pre>
                    </div>
                    <div class="code-block" id="code-javascript" style="display: none;">
                        <button class="code-copy" onclick="copyCode()"><i class="fas fa-copy"></i> Copy</button>
                        <pre><span class="keyword">import</span> { PromptingIt } <span class="keyword">from</span> <span class="string">'@promptingit/sdk'</span>;

<span class="comment">// Initialize the client</span>
<span class="keyword">const</span> client = <span class="keyword">new</span> <span class="function">PromptingIt</span>(<span class="string">'pk_live_your_api_key'</span>);

<span class="comment">// Execute a prompt</span>
<span class="keyword">const</span> response = <span class="keyword">await</span> client.prompts.<span class="function">execute</span>({
  promptId: <span class="string">'customer-support-v2'</span>,
  variables: {
    customer_name: <span class="string">'John'</span>,
    issue: <span class="string">'billing question'</span>
  },
  model: <span class="string">'gpt-4'</span>
});

console.<span class="function">log</span>(response.output);</pre>
                    </div>
                    <div class="code-block" id="code-go" style="display: none;">
                        <button class="code-copy" onclick="copyCode()"><i class="fas fa-copy"></i> Copy</button>
                        <pre><span class="keyword">package</span> main

<span class="keyword">import</span> (
    <span class="string">"fmt"</span>
    <span class="string">"github.com/promptingit/go-sdk"</span>
)

<span class="keyword">func</span> <span class="function">main</span>() {
    <span class="comment">// Initialize the client</span>
    client := promptingit.<span class="function">NewClient</span>(<span class="string">"pk_live_your_api_key"</span>)

    <span class="comment">// Execute a prompt</span>
    response, err := client.Prompts.<span class="function">Execute</span>(promptingit.ExecuteParams{
        PromptID: <span class="string">"customer-support-v2"</span>,
        Variables: <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>{
            <span class="string">"customer_name"</span>: <span class="string">"John"</span>,
            <span class="string">"issue"</span>:         <span class="string">"billing question"</span>,
        },
        Model: <span class="string">"gpt-4"</span>,
    })

    fmt.<span class="function">Println</span>(response.Output)
}</pre>
                    </div>
                </div>
            </div>

            <!-- Usage Chart & Rate Limits -->
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title"><i class="fas fa-chart-area"></i> API Usage</h3>
                    </div>
                    <div class="usage-chart">
                        <div class="chart-header">
                            <span style="color: var(--text-3); font-size: 13px;">Requests per day</span>
                            <div class="chart-period">
                                <button class="chart-period-btn">7D</button>
                                <button class="chart-period-btn active">14D</button>
                                <button class="chart-period-btn">30D</button>
                            </div>
                        </div>
                        <div class="chart-bars">
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 65%;" data-value="18.2k"></div>
                                <span class="chart-label">Dec 17</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 78%;" data-value="22.1k"></div>
                                <span class="chart-label">Dec 18</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 82%;" data-value="23.4k"></div>
                                <span class="chart-label">Dec 19</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 70%;" data-value="19.8k"></div>
                                <span class="chart-label">Dec 20</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 45%;" data-value="12.6k"></div>
                                <span class="chart-label">Dec 21</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 52%;" data-value="14.7k"></div>
                                <span class="chart-label">Dec 22</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 88%;" data-value="25.1k"></div>
                                <span class="chart-label">Dec 23</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 92%;" data-value="26.3k"></div>
                                <span class="chart-label">Dec 24</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 68%;" data-value="19.2k"></div>
                                <span class="chart-label">Dec 25</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 75%;" data-value="21.4k"></div>
                                <span class="chart-label">Dec 26</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 85%;" data-value="24.2k"></div>
                                <span class="chart-label">Dec 27</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 90%;" data-value="25.7k"></div>
                                <span class="chart-label">Dec 28</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 80%;" data-value="22.8k"></div>
                                <span class="chart-label">Dec 29</span>
                            </div>
                            <div class="chart-bar-group">
                                <div class="chart-bar" style="height: 87%;" data-value="24.8k"></div>
                                <span class="chart-label">Dec 30</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title"><i class="fas fa-tachometer-alt"></i> Rate Limits</h3>
                    </div>
                    <div class="rate-limits">
                        <div class="rate-limit-item">
                            <div class="rate-limit-header">
                                <span class="rate-limit-name">Requests / minute</span>
                                <span class="rate-limit-value">847 / 1,000</span>
                            </div>
                            <div class="rate-limit-bar">
                                <div class="rate-limit-fill high" style="width: 84.7%;"></div>
                            </div>
                        </div>
                        <div class="rate-limit-item">
                            <div class="rate-limit-header">
                                <span class="rate-limit-name">Requests / day</span>
                                <span class="rate-limit-value">24,847 / 100,000</span>
                            </div>
                            <div class="rate-limit-bar">
                                <div class="rate-limit-fill low" style="width: 24.8%;"></div>
                            </div>
                        </div>
                        <div class="rate-limit-item">
                            <div class="rate-limit-header">
                                <span class="rate-limit-name">Tokens / minute</span>
                                <span class="rate-limit-value">45,200 / 100,000</span>
                            </div>
                            <div class="rate-limit-bar">
                                <div class="rate-limit-fill medium" style="width: 45.2%;"></div>
                            </div>
                        </div>
                        <div class="rate-limit-item">
                            <div class="rate-limit-header">
                                <span class="rate-limit-name">Concurrent requests</span>
                                <span class="rate-limit-value">12 / 50</span>
                            </div>
                            <div class="rate-limit-bar">
                                <div class="rate-limit-fill low" style="width: 24%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Create API Key Modal -->
    <div id="create-key-modal" class="modal" style="display: none;">
        <div class="modal-overlay" onclick="closeModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-key"></i> Create New API Key</h3>
                <button class="modal-close" onclick="closeModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Key Name</label>
                    <input type="text" id="key-name" class="form-input" placeholder="e.g., Production Key">
                </div>
                <div class="form-group">
                    <label>Environment</label>
                    <select id="key-env" class="form-input">
                        <option value="live">Production (live)</option>
                        <option value="test">Development (test)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Permissions</label>
                    <div class="checkbox-group">
                        <label class="checkbox"><input type="checkbox" checked> Read prompts</label>
                        <label class="checkbox"><input type="checkbox" checked> Execute prompts</label>
                        <label class="checkbox"><input type="checkbox"> Write prompts</label>
                        <label class="checkbox"><input type="checkbox"> Delete prompts</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Rate Limit (requests/minute)</label>
                    <input type="number" id="key-rate-limit" class="form-input" value="100" min="10" max="10000">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="createApiKey()">
                    <i class="fas fa-plus"></i> Create Key
                </button>
            </div>
        </div>
    </div>

    <!-- New Key Display Modal -->
    <div id="new-key-modal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-check-circle" style="color: var(--emerald);"></i> API Key Created</h3>
            </div>
            <div class="modal-body">
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Important:</strong> Copy your API key now. You won't be able to see it again!
                </div>
                <div class="new-key-display">
                    <code id="new-key-value"></code>
                    <button onclick="copyNewKey()" class="btn btn-primary">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeNewKeyModal()">I've Copied My Key</button>
            </div>
        </div>
    </div>

    <style>
        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
        }
        .modal-content {
            position: relative;
            background: var(--surface-1);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 480px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--surface-3);
        }
        .modal-header h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }
        .modal-header h3 i { color: var(--glacier); }
        .modal-close {
            background: none;
            border: none;
            color: var(--text-3);
            cursor: pointer;
            font-size: 18px;
            transition: color var(--duration-fast);
        }
        .modal-close:hover { color: var(--text-1); }
        .modal-body { padding: 24px; }
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 16px 24px;
            border-top: 1px solid var(--surface-3);
        }
        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-2);
            margin-bottom: 8px;
        }
        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: var(--surface-2);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-md);
            color: var(--text-1);
            font-size: 14px;
        }
        .form-input:focus {
            outline: none;
            border-color: var(--glacier);
        }
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-2);
            cursor: pointer;
        }
        .checkbox input {
            width: 16px;
            height: 16px;
            accent-color: var(--glacier);
        }
        .alert {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
        }
        .alert-warning {
            background: rgba(250,204,21,0.1);
            border: 1px solid rgba(250,204,21,0.3);
            color: var(--solar);
        }
        .alert-warning i { margin-top: 2px; }
        .new-key-display {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .new-key-display code {
            flex: 1;
            padding: 16px;
            background: var(--surface-2);
            border: 1px solid var(--surface-3);
            border-radius: var(--radius-md);
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--glacier);
            word-break: break-all;
        }
    </style>

    <script>
        // API Console State
        const apiState = {
            keys: [],
            usage: {
                today: 0,
                month: 0,
                avgResponseTime: 0,
                successRate: 99.8
            }
        };

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        // Initialize API Console
        async function initApiConsole() {
            try {
                // Auth guard handles redirect, so if we're here, user should be authenticated
                const user = window.Auth?.getUser();
                
                await loadApiKeys();
                await loadUsageStats();
            } catch (error) {
                console.error('Failed to initialize API console:', error);
                // Use mock data for demo
                loadMockData();
            }
        }

        // Get Supabase client
        function getSupabase() {
            return window.PromptingItSupabase?.getClient();
        }

        // Load API keys from Supabase
        async function loadApiKeys() {
            const supabase = getSupabase();
            if (!supabase) {
                loadMockData();
                return;
            }

            try {
                const { data, error } = await supabase
                    .from('api_keys')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) throw error;
                apiState.keys = data || [];
                if (apiState.keys.length === 0) {
                    // Use mock data if no keys in database
                    loadMockData();
                    return;
                }
                renderApiKeys();
            } catch (error) {
                console.error('Failed to load API keys:', error);
                loadMockData();
            }
        }

        // Load usage stats
        async function loadUsageStats() {
            // For now, use mock data - in production this would query analytics
            apiState.usage = {
                today: 24847,
                month: 487293,
                avgResponseTime: 142,
                successRate: 99.8
            };
            renderUsageStats();
        }

        // Load mock data for demo
        function loadMockData() {
            apiState.keys = [
                {
                    id: '1',
                    name: 'Production Key',
                    key_prefix: 'pk_live_',
                    key_hash: '••••••••••••••••8f4a',
                    is_active: true,
                    rate_limit: 1000,
                    calls_used: 18432,
                    created_at: '2024-12-15T00:00:00Z',
                    last_used_at: new Date(Date.now() - 2 * 60 * 1000).toISOString()
                },
                {
                    id: '2',
                    name: 'Development Key',
                    key_prefix: 'pk_test_',
                    key_hash: '••••••••••••••••2b1c',
                    is_active: true,
                    rate_limit: 100,
                    calls_used: 6415,
                    created_at: '2024-11-28T00:00:00Z',
                    last_used_at: new Date(Date.now() - 60 * 60 * 1000).toISOString()
                },
                {
                    id: '3',
                    name: 'CI/CD Pipeline Key',
                    key_prefix: 'pk_ci_',
                    key_hash: '••••••••••••••••9d3e',
                    is_active: false,
                    rate_limit: 50,
                    calls_used: 0,
                    created_at: '2024-10-10T00:00:00Z',
                    last_used_at: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
                }
            ];
            renderApiKeys();
            loadUsageStats();
        }

        // Render API keys list
        function renderApiKeys() {
            const container = document.querySelector('.api-keys-list');
            if (!container) return;

            if (apiState.keys.length === 0) {
                container.innerHTML = `
                    <div style="padding: 40px; text-align: center; color: var(--text-3);">
                        <i class="fas fa-key" style="font-size: 32px; margin-bottom: 16px; display: block;"></i>
                        <p>No API keys yet. Create one to get started.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = apiState.keys.map(key => createKeyCard(key)).join('');
        }

        // Create API key card HTML
        function createKeyCard(key) {
            const createdDate = new Date(key.created_at).toLocaleDateString('en-US', { 
                month: 'short', day: 'numeric', year: 'numeric' 
            });
            const lastUsed = key.last_used_at ? formatTimeAgo(key.last_used_at) : 'Never';
            const statusClass = key.is_active ? 'active' : 'limited';
            const statusText = key.is_active ? 'Active' : 'Rate Limited';
            const iconBg = key.is_active ? 'rgba(103,232,249,0.1)' : 'rgba(250,204,21,0.1)';
            const iconColor = key.is_active ? 'var(--glacier)' : 'var(--solar)';

            return `
                <div class="api-key-item" data-id="${key.id}">
                    <div class="api-key-icon" style="background: ${iconBg}; color: ${iconColor};">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="api-key-info">
                        <div class="api-key-name">
                            ${escapeHtml(key.name)}
                            <span class="api-key-badge ${statusClass}">${statusText}</span>
                        </div>
                        <div class="api-key-value">
                            <span data-full="${key.key_prefix}${key.key_hash}">${key.key_prefix}${key.key_hash}</span>
                            <button onclick="copyKey(this)" title="Copy"><i class="fas fa-copy"></i></button>
                            <button onclick="toggleKey(this)" title="Show/Hide"><i class="fas fa-eye"></i></button>
                        </div>
                        <div class="api-key-meta">
                            <span><i class="fas fa-calendar"></i> Created ${createdDate}</span>
                            <span><i class="fas fa-clock"></i> Last used ${lastUsed}</span>
                            <span><i class="fas fa-chart-line"></i> ${formatNumber(key.calls_used)} calls today</span>
                        </div>
                    </div>
                    <div class="api-key-actions">
                        <button class="api-key-action" title="Edit" onclick="editKey('${key.id}')"><i class="fas fa-pencil-alt"></i></button>
                        <button class="api-key-action" title="Regenerate" onclick="regenerateKey('${key.id}')"><i class="fas fa-sync-alt"></i></button>
                        <button class="api-key-action danger" title="Delete" onclick="deleteKey('${key.id}')"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            `;
        }

        // Render usage stats
        function renderUsageStats() {
            const stats = document.querySelectorAll('.usage-stat-value');
            if (stats[0]) stats[0].textContent = formatNumber(apiState.usage.today);
            if (stats[1]) stats[1].textContent = formatNumber(apiState.usage.month);
            if (stats[2]) stats[2].textContent = apiState.usage.avgResponseTime + 'ms';
            if (stats[3]) stats[3].textContent = apiState.usage.successRate + '%';
        }

        // Modal functions
        function openCreateKeyModal() {
            document.getElementById('create-key-modal').style.display = 'flex';
            document.getElementById('key-name').focus();
        }

        function closeModal() {
            document.getElementById('create-key-modal').style.display = 'none';
        }

        function closeNewKeyModal() {
            document.getElementById('new-key-modal').style.display = 'none';
        }

        // Create new API key
        async function createApiKey() {
            const name = document.getElementById('key-name').value.trim();
            const env = document.getElementById('key-env').value;
            const rateLimit = parseInt(document.getElementById('key-rate-limit').value);

            if (!name) {
                alert('Please enter a key name');
                return;
            }

            try {
                // Generate a mock API key (in production, this would be done server-side)
                const keyPrefix = env === 'live' ? 'pk_live_' : 'pk_test_';
                const randomPart = generateRandomKey(32);
                const fullKey = keyPrefix + randomPart;

                const supabase = getSupabase();
                if (supabase) {
                    const { data, error } = await supabase
                        .from('api_keys')
                        .insert({
                            name: name,
                            key_prefix: keyPrefix,
                            key_hash: hashKey(randomPart),
                            rate_limit: rateLimit,
                            is_active: true,
                            permissions: ['read', 'execute']
                        })
                        .select()
                        .single();

                    if (error) throw error;
                }

                // Show the new key
                closeModal();
                showNewKey(fullKey);

                // Refresh the list
                await loadApiKeys();

            } catch (error) {
                console.error('Failed to create API key:', error);
                alert('Failed to create API key. Please try again.');
            }
        }

        function showNewKey(key) {
            document.getElementById('new-key-value').textContent = key;
            document.getElementById('new-key-modal').style.display = 'flex';
        }

        function copyNewKey() {
            const key = document.getElementById('new-key-value').textContent;
            navigator.clipboard.writeText(key);
            alert('API key copied to clipboard!');
        }

        // Key actions
        function editKey(id) {
            const key = apiState.keys.find(k => k.id === id);
            if (key) {
                alert(`Edit key: ${key.name}\nThis would open an edit modal.`);
            }
        }

        async function regenerateKey(id) {
            if (!confirm('Regenerating this key will invalidate the current key. Continue?')) return;
            
            const key = apiState.keys.find(k => k.id === id);
            if (key) {
                const newKey = key.key_prefix + generateRandomKey(32);
                showNewKey(newKey);
                
                // In production, update the key in the database
                const supabaseRegen = getSupabase();
                if (supabaseRegen) {
                    await supabaseRegen
                        .from('api_keys')
                        .update({ key_hash: hashKey(newKey.replace(key.key_prefix, '')) })
                        .eq('id', id);
                }
            }
        }

        async function deleteKey(id) {
            const key = apiState.keys.find(k => k.id === id);
            if (!key) return;

            if (!confirm(`Delete "${key.name}"? This action cannot be undone.`)) return;

            try {
                const supabaseDel = getSupabase();
                if (supabaseDel) {
                    const { error } = await supabaseDel
                        .from('api_keys')
                        .delete()
                        .eq('id', id);
                    
                    if (error) throw error;
                }

                // Remove from local state
                apiState.keys = apiState.keys.filter(k => k.id !== id);
                renderApiKeys();

            } catch (error) {
                console.error('Failed to delete key:', error);
                alert('Failed to delete key. Please try again.');
            }
        }

        // Utility functions
        function generateRandomKey(length) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function hashKey(key) {
            // Simple masking for display (real hashing would be done server-side)
            return '••••••••••••••••' + key.slice(-4);
        }

        function formatTimeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const seconds = Math.floor((now - date) / 1000);
            
            if (seconds < 60) return 'Just now';
            if (seconds < 3600) return `${Math.floor(seconds / 60)} minutes ago`;
            if (seconds < 86400) return `${Math.floor(seconds / 3600)} hour${Math.floor(seconds / 3600) > 1 ? 's' : ''} ago`;
            return `${Math.floor(seconds / 86400)} day${Math.floor(seconds / 86400) > 1 ? 's' : ''} ago`;
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(0) + ',' + (num % 1000).toString().padStart(3, '0');
            return num.toString();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showLoginPrompt() {
            const main = document.querySelector('.main');
            if (main) {
                main.innerHTML = `
                    <div style="text-align: center; padding: 60px 40px;">
                        <div style="width: 80px; height: 80px; background: var(--surface-2); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
                            <i class="fas fa-lock" style="font-size: 32px; color: var(--text-3);"></i>
                        </div>
                        <h2 style="margin-bottom: 12px;">Log in to access API Console</h2>
                        <p style="color: var(--text-2); margin-bottom: 24px;">Manage your API keys and monitor usage</p>
                        <a href="login.html" class="btn btn-primary" style="display: inline-flex;">
                            <i class="fas fa-sign-in-alt"></i> Log In
                        </a>
                    </div>
                `;
            }
        }

        // Code tab switching
        function showCodeTab(lang) {
            document.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.code-block').forEach(b => b.style.display = 'none');

            event.target.classList.add('active');
            document.getElementById('code-' + lang).style.display = 'block';
        }

        function copyKey(btn) {
            const keyText = btn.parentElement.querySelector('span').dataset.full || 
                           btn.parentElement.querySelector('span').textContent;
            navigator.clipboard.writeText(keyText);
            btn.innerHTML = '<i class="fas fa-check"></i>';
            setTimeout(() => btn.innerHTML = '<i class="fas fa-copy"></i>', 2000);
        }

        function toggleKey(btn) {
            const span = btn.parentElement.querySelector('span');
            const full = span.dataset.full;
            if (span.dataset.revealed === 'true') {
                const prefix = full.match(/^pk_\w+_/)?.[0] || '';
                span.textContent = prefix + '••••••••••••••••' + full.slice(-4);
                span.dataset.revealed = 'false';
                btn.innerHTML = '<i class="fas fa-eye"></i>';
            } else {
                span.textContent = full;
                span.dataset.revealed = 'true';
                btn.innerHTML = '<i class="fas fa-eye-slash"></i>';
            }
        }

        function copyCode() {
            const activeBlock = document.querySelector('.code-block[style*="block"], .code-block:not([style*="none"])');
            const code = activeBlock.querySelector('pre').textContent;
            navigator.clipboard.writeText(code);
            const btn = activeBlock.querySelector('.code-copy');
            btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
            setTimeout(() => btn.innerHTML = '<i class="fas fa-copy"></i> Copy', 2000);
        }

        // Chart period buttons
        document.querySelectorAll('.chart-period-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.chart-period-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                // In production, this would reload chart data for the selected period
            });
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initApiConsole);
    </script>
</body>
</html>
