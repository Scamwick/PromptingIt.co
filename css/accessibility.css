/* ============================================
   PROMPTING IT - ACCESSIBILITY STYLES
   WCAG 2.1 AA compliant accessibility CSS
   ============================================ */

/* Screen reader only class */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Skip link styles */
.skip-link {
    position: fixed;
    top: -100px;
    left: 16px;
    z-index: 10000;
    padding: 12px 24px;
    background: var(--glacier, #22d3ee);
    color: var(--surface-0, #000);
    text-decoration: none;
    font-weight: 600;
    border-radius: 8px;
    transition: top 0.2s ease;
}

.skip-link:focus {
    top: 16px;
    outline: 3px solid var(--glacier-deep, #06b6d4);
    outline-offset: 2px;
}

/* Enhanced focus indicators */
:focus-visible {
    outline: 2px solid var(--glacier, #22d3ee);
    outline-offset: 2px;
}

/* Custom focus for dark backgrounds */
.surface-dark :focus-visible,
[data-theme="dark"] :focus-visible {
    outline-color: var(--glacier, #22d3ee);
}

/* Focus ring for buttons and interactive elements */
button:focus-visible,
.btn:focus-visible,
[role="button"]:focus-visible {
    outline: 2px solid var(--glacier, #22d3ee);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(34, 211, 238, 0.2);
}

/* Links focus */
a:focus-visible {
    outline: 2px solid var(--glacier, #22d3ee);
    outline-offset: 2px;
    border-radius: 2px;
}

/* Form inputs focus */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
    outline: 2px solid var(--glacier, #22d3ee);
    outline-offset: 0;
    border-color: var(--glacier, #22d3ee);
}

/* Required field indicator */
.required::after,
label.required::after {
    content: ' *';
    color: var(--error, #ef4444);
    font-weight: 600;
}

/* Error states with proper contrast */
[aria-invalid="true"],
.form-group.has-error input,
.form-group.has-error select,
.form-group.has-error textarea {
    border-color: var(--error, #ef4444);
    border-width: 2px;
}

/* Disabled states */
[aria-disabled="true"],
[disabled] {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

/* Loading states */
[aria-busy="true"] {
    cursor: wait;
}

/* Expanded/collapsed indicators */
[aria-expanded="false"]::after {
    content: '';
    display: inline-block;
    width: 0;
    height: 0;
    margin-left: 8px;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid currentColor;
    vertical-align: middle;
}

[aria-expanded="true"]::after {
    content: '';
    display: inline-block;
    width: 0;
    height: 0;
    margin-left: 8px;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid currentColor;
    vertical-align: middle;
}

/* Current page indicator */
[aria-current="page"] {
    font-weight: 600;
    color: var(--glacier, #22d3ee);
}

/* Table accessibility */
.table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.table-responsive:focus {
    outline: 2px solid var(--glacier, #22d3ee);
    outline-offset: 2px;
}

table {
    border-collapse: collapse;
}

th {
    text-align: left;
    font-weight: 600;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :focus-visible {
        outline-width: 3px;
    }

    button,
    .btn,
    [role="button"],
    a {
        border: 2px solid currentColor;
    }

    .form-input,
    input,
    select,
    textarea {
        border-width: 2px;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* Alternative for reduce motion class */
.reduce-motion *,
.reduce-motion *::before,
.reduce-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
}

/* Color contrast adjustments for text on images */
.text-on-image {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
}

/* Selection colors for better visibility */
::selection {
    background: var(--glacier, #22d3ee);
    color: var(--surface-0, #000);
}

::-moz-selection {
    background: var(--glacier, #22d3ee);
    color: var(--surface-0, #000);
}

/* Modal accessibility */
[role="dialog"] {
    position: fixed;
    z-index: 1000;
}

[role="dialog"][aria-modal="true"] {
    isolation: isolate;
}

/* Live region styles */
[aria-live] {
    position: relative;
}

/* Alert styles */
[role="alert"] {
    padding: 12px 16px;
    border-radius: 8px;
    margin-bottom: 16px;
}

[role="alert"].error {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: var(--error, #ef4444);
}

[role="alert"].success {
    background: rgba(34, 197, 94, 0.1);
    border: 1px solid rgba(34, 197, 94, 0.3);
    color: var(--success, #22c55e);
}

/* Tooltip accessibility */
[role="tooltip"] {
    position: absolute;
    z-index: 9999;
    padding: 8px 12px;
    background: var(--surface-3, #333);
    color: var(--text-1, #fff);
    border-radius: 6px;
    font-size: 13px;
    max-width: 200px;
    pointer-events: none;
}

/* Tab accessibility */
[role="tablist"] {
    display: flex;
    gap: 4px;
}

[role="tab"] {
    padding: 8px 16px;
    cursor: pointer;
    border: none;
    background: transparent;
    color: var(--text-2, #888);
}

[role="tab"][aria-selected="true"] {
    color: var(--glacier, #22d3ee);
    border-bottom: 2px solid var(--glacier, #22d3ee);
    font-weight: 600;
}

[role="tabpanel"] {
    padding: 16px;
}

[role="tabpanel"][hidden] {
    display: none;
}

/* Menu accessibility */
[role="menu"] {
    list-style: none;
    padding: 8px 0;
    margin: 0;
}

[role="menuitem"] {
    padding: 8px 16px;
    cursor: pointer;
}

[role="menuitem"]:hover,
[role="menuitem"]:focus {
    background: var(--surface-2, rgba(255, 255, 255, 0.05));
}

/* Button group */
[role="group"] {
    display: inline-flex;
    gap: 0;
}

[role="group"] > button:not(:first-child) {
    border-left-width: 0;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

[role="group"] > button:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

/* Progress indicator */
[role="progressbar"] {
    height: 8px;
    background: var(--surface-3, #333);
    border-radius: 4px;
    overflow: hidden;
}

[role="progressbar"]::before {
    content: '';
    display: block;
    height: 100%;
    background: var(--glacier, #22d3ee);
    width: var(--progress, 0%);
    transition: width 0.3s ease;
}

/* Switch/Toggle accessibility */
[role="switch"] {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
    background: var(--surface-3, #333);
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.2s ease;
}

[role="switch"]::after {
    content: '';
    position: absolute;
    left: 2px;
    top: 2px;
    width: 20px;
    height: 20px;
    background: #fff;
    border-radius: 50%;
    transition: transform 0.2s ease;
}

[role="switch"][aria-checked="true"] {
    background: var(--glacier, #22d3ee);
}

[role="switch"][aria-checked="true"]::after {
    transform: translateX(20px);
}

/* Print styles for accessibility */
@media print {
    .skip-link,
    [aria-hidden="true"] {
        display: none !important;
    }

    a[href]::after {
        content: " (" attr(href) ")";
        font-size: 0.8em;
        color: #666;
    }

    abbr[title]::after {
        content: " (" attr(title) ")";
    }
}
